
<%# MY HEALTH SPACE %>
<%# ------------------------------------------------------------------------ %>

<div class="container mt-4">
  <div class="cards col-12 col-lg-6 border-0 rounded-5 p-2">
    <h1 class="text-center mt-1 mb-0 text-uppercase align-bottom fw-bolder">
      My Health Space
    </h1>
  </div>

<%# USER INFO %>
<%# ------------------------------------------------------------------------ %>

  <div class="cards col-12 col-lg-6 border-0 rounded-5">
    <div class="card mb-0 border-2 rounded-5">
      <div class="row g-0">
        <div class="col-4 border-0">

          <%#  Ideally this should be a helper   %>
          <%#                 ðŸ‘‡                 %>

          <% if current_user.photo.attached? %>
            <%= cl_image_tag photo.key,
                width: '100%',
                class: "img-fluid rounded-circle",
                alt: "profile picture" %>
          <% else %>
            <%= image_tag "user_icon.jpg",
                class: "img-fluid rounded-circle",
                alt: "profile picture" %>
          <% end %>

          <%#                 ðŸ‘†                 %>

        </div>

        <div class="col-8 border-0 ">
          <div class="card m-2 border-0">
            <h4 class="card-title fw-bolder text-uppercase">
              <%= current_user.first_name %> <%= current_user.last_name %>
            </h4>
            <p>
              <strong>CNS:</strong> <%= current_user.cns %></p>
            <p>
              <strong>Address:</strong> <%= current_user.address %></p>
            <p>
              <strong>Phone Number:</strong> <%= current_user.phone_number %></p>
            <p>
              <strong>e-mail:</strong> <%= current_user.email %></p>
          </div>
        </div>
      </div>
    </div>
  </div>

<%# MY DIAGNOSES %>
<%# ------------------------------------------------------------------------ %>

  <div class="cards col-12 col-lg-6 border-0 rounded-5">
    <div class="row g-0">
      <div class="card border-0 rounded-5">
        <h4 class="card-header text-uppercase">My Diagnoses</h4>
        <div class="card-body p-0 mb-2">

          <% @my_diagnoses.each do |diagnosis| %>
            <div class="card m-0 mb-2">
              <div class="card-header text-uppercase"><h4 class="fw-bolder mb-0"><%= diagnosis.disease %></h4></div>
              <div class="card-body">
                <% diagnosis.medications.each do |medication| %>
                  <div class="row">
                    <div class="col-6 border-0-rounded-5">
                      <strong><%= medication.name %></strong>
                    </div>
                    <div class="col-6 border-0-rounded-5">
                      <p><%= medication.daily_dosage %></p>
                    </div>
                  </div>
                <% end %>
                <div class="d-flex justify-content-end">
                  <%= link_to "Edit", edit_diagnosis_path(diagnosis.id), class:"btn btn-primary rounded-3 btn-sm mx-2" %>
                  <%= link_to "Delete", diagnosis_path(diagnosis.id), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class:"btn btn-primary rounded-3 btn-sm mx-2" %>
                </div>
              </div>
            </div>
          <% end %>

          <div class="gap-2 d-flex justify-content-end">
            <%= link_to "Add new diagnosis",
                new_diagnosis_path,
                class:"btn btn-primary btn-sm rounded-3 me-2" %>
          </div>
        </div>
      </div>
    </div>
  </div>

<%# HOW I'VE BEEN FEELING %>
<%# ------------------------------------------------------------------------ %>

  <div class="row">
    <div class="cards col-12 col-lg-6 border-0  rounded-5">
      <div class="card mb-0 border-2 rounded-5">
        <div class="row g-0">
          <div class="card border-0 rounded-5">
            <h4 class="card-header text-uppercase">How I've been feeling</h4>
            <div class="card-body">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
